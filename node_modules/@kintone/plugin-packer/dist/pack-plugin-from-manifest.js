"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.packPluginFromManifest = void 0;
const fs_1 = __importDefault(require("fs"));
const path_1 = __importDefault(require("path"));
const _1 = __importDefault(require("."));
const create_contents_zip_1 = require("./create-contents-zip");
const packPluginFromManifest = (manifestJSONPath, privateKey) => {
    return new Promise((resolve, reject) => {
        try {
            resolve(JSON.parse(fs_1.default.readFileSync(manifestJSONPath, "utf-8")));
        }
        catch (e) {
            reject(e);
        }
    })
        .then((manifest) => (0, create_contents_zip_1.createContentsZip)(path_1.default.dirname(manifestJSONPath), manifest))
        .then((buffer) => (0, _1.default)(buffer, privateKey));
};
exports.packPluginFromManifest = packPluginFromManifest;
//# sourceMappingURL=pack-plugin-from-manifest.js.map